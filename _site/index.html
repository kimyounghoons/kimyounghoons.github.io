<!doctype html>
<!--[if lt IE 7]><html class="no-js lt-ie9 lt-ie8 lt-ie7" lang="en"> <![endif]-->
<!--[if (IE 7)&!(IEMobile)]><html class="no-js lt-ie9 lt-ie8" lang="en"><![endif]-->
<!--[if (IE 8)&!(IEMobile)]><html class="no-js lt-ie9" lang="en"><![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en"><!--<![endif]-->
<head>
<meta charset="utf-8">
<title>기록하고 기억하자! &#8211; 영훈 블로그</title>
<meta name="description" content="Describe this nonsense.">
<meta name="keywords" content="Jekyll, theme, themes, responsive, blog, modern">



<!-- Open Graph -->
<meta property="og:locale" content="">
<meta property="og:type" content="article">
<meta property="og:title" content="기록하고 기억하자!">
<meta property="og:description" content="Describe this nonsense.">
<meta property="og:url" content="http://localhost:4000/">
<meta property="og:site_name" content="영훈 블로그">
<meta property="og:image" content="http://localhost:4000/images/images/logo.png">





<link rel="canonical" href="http://localhost:4000/">
<link href="http://localhost:4000/feed.xml" type="application/atom+xml" rel="alternate" title="영훈 블로그 Feed">

<!-- http://t.co/dKP3o1e -->
<meta name="HandheldFriendly" content="True">
<meta name="MobileOptimized" content="320">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1.0, user-scalable=no"/>

<!-- For all browsers -->
<link rel="stylesheet" href="http://localhost:4000/assets/css/main.css">
<link rel="stylesheet" href="http://localhost:4000/assets/css/jquery.mmenu.all.css">
<link rel="stylesheet" href="http://localhost:4000/assets/css/jquery.floating-social-share.min.css">
<!-- Webfonts -->
<link href="//fonts.googleapis.com/css?family=Lato:300,400,700,300italic,400italic" rel="stylesheet" type="text/css">

<meta http-equiv="cleartype" content="on">

<!-- Load Modernizr -->
<script type="text/javascript" src="http://localhost:4000/assets/js/vendor/modernizr-2.6.2.custom.min.js"></script>

<!-- Icons -->
<!-- 16x16 -->
<link rel="shortcut icon" href="http://localhost:4000/favicon.ico">
<!-- 32x32 -->
<link rel="shortcut icon" href="http://localhost:4000/favicon.png">
<!-- 57x57 (precomposed) for iPhone 3GS, pre-2011 iPod Touch and older Android devices -->
<link rel="apple-touch-icon-precomposed" href="http://localhost:4000/images/apple-touch-icon-precomposed.png">
<!-- 72x72 (precomposed) for 1st generation iPad, iPad 2 and iPad mini -->
<link rel="apple-touch-icon-precomposed" sizes="72x72" href="http://localhost:4000/images/apple-touch-icon-72x72-precomposed.png">
<!-- 114x114 (precomposed) for iPhone 4, 4S, 5 and post-2011 iPod Touch -->
<link rel="apple-touch-icon-precomposed" sizes="114x114" href="http://localhost:4000/images/apple-touch-icon-114x114-precomposed.png">
<!-- 144x144 (precomposed) for iPad 3rd and 4th generation -->
<link rel="apple-touch-icon-precomposed" sizes="144x144" href="http://localhost:4000/images/apple-touch-icon-144x144-precomposed.png">




</head>

<body id="post-index">

<!--[if lt IE 9]><div class="upgrade"><strong><a href="http://whatbrowser.org/">Your browser is quite old!</strong> Why not upgrade to a different browser to better enjoy this site?</a></div><![endif]-->



<div class="header-menu header-menu-top">
    <ul class="header-item-container">
      <li class="header-item-title header-toggle "><a href="#menu"><h2><i class="fa fa-bars"></i></h2></a></li>
      <li class="header-item-title">
        <a href="http://localhost:4000/">
          
            <img class="logo" src="http://localhost:4000/images/logo.png" alt="영훈 블로그">
          
          <a href="http://localhost:4000/" class="title"> 영훈 블로그</a>
        </a>
      </li>
      
        
        

        
          <li class="header-item "><a href="http://localhost:4000/categories"><h3>Categories</h3></a>
            <ul class="header-submenu">
              
                
                  <li class="sub-item"><a href="http://localhost:4000/categories/#Git">Git</a></li>
              
                
                  <li class="sub-item"><a href="http://localhost:4000/categories/#RxKotlin">RxKotlin</a></li>
              
                
                  <li class="sub-item"><a href="http://localhost:4000/categories/#Single">Single</a></li>
              
                
                  <li class="sub-item"><a href="http://localhost:4000/categories/#SourceTree">SourceTree</a></li>
              
                
                  <li class="sub-item"><a href="http://localhost:4000/categories/#aac">aac</a></li>
              
                
                  <li class="sub-item"><a href="http://localhost:4000/categories/#android">android</a></li>
              
                
                  <li class="sub-item"><a href="http://localhost:4000/categories/#applicationInfo">applicationInfo</a></li>
              
                
                  <li class="sub-item"><a href="http://localhost:4000/categories/#blog">blog</a></li>
              
                
                  <li class="sub-item"><a href="http://localhost:4000/categories/#firebase">firebase</a></li>
              
                
                  <li class="sub-item"><a href="http://localhost:4000/categories/#flag">flag</a></li>
              
                
                  <li class="sub-item"><a href="http://localhost:4000/categories/#interview">interview</a></li>
              
                
                  <li class="sub-item"><a href="http://localhost:4000/categories/#kotlin">kotlin</a></li>
              
                
                  <li class="sub-item"><a href="http://localhost:4000/categories/#mac">mac</a></li>
              
                
                  <li class="sub-item"><a href="http://localhost:4000/categories/#notification">notification</a></li>
              
                
                  <li class="sub-item"><a href="http://localhost:4000/categories/#sample">sample</a></li>
              
                
                  <li class="sub-item"><a href="http://localhost:4000/categories/#singleTask">singleTask</a></li>
              
                
                  <li class="sub-item"><a href="http://localhost:4000/categories/#알고리즘">알고리즘</a></li>
              
                
                  <li class="sub-item"><a href="http://localhost:4000/categories/#자바">자바</a></li>
              
            </ul>
          </li>
        
      
        
        

        
            
                <li class="header-item "><a href="http://localhost:4000/tags"><h3>Tags</h3></a></li>
            
        
      
        
        

        
            
                <li class="header-item "><a href="http://localhost:4000/"><h3>Home</h3></a></li>
            
        
      
      <li class="header-item"><a href="http://localhost:4000/search"><h3><i class="fa fa-search"></i></h3></a></li>
    </ul>
  </div>
<div class="entry-header">
  <div class="header-title">
    <div class="header-title-wrap">
      <h1>기록하고 기억하자!</h1>
      
        <h2><span class="entry-date"><time>&nbsp;</time></span></h2>
      

      
          <p class="entry-reading-time">
            &nbsp;
          </p><!-- /.entry-reading-time -->
      
    </div><!-- /.header-title-wrap -->
  </div><!-- /.header-title -->
</div><!-- /.entry-header -->


<nav id="menu" style="display: none">
  <ul>
    
      
        <li><a href="http://localhost:4000/"><h3>Home</h3></a></li>
      
    
      
        <li><a href="http://localhost:4000/tags"><h3>Tags</h3></a></li>
      
    
      
        <li><a href="http://localhost:4000/categories"><h3>Categories</h3></a>
          <ul>
            
              
                <li><a href="http://localhost:4000/categories/#Git">Git</a></li>
            
              
                <li><a href="http://localhost:4000/categories/#RxKotlin">RxKotlin</a></li>
            
              
                <li><a href="http://localhost:4000/categories/#Single">Single</a></li>
            
              
                <li><a href="http://localhost:4000/categories/#SourceTree">SourceTree</a></li>
            
              
                <li><a href="http://localhost:4000/categories/#aac">aac</a></li>
            
              
                <li><a href="http://localhost:4000/categories/#android">android</a></li>
            
              
                <li><a href="http://localhost:4000/categories/#applicationInfo">applicationInfo</a></li>
            
              
                <li><a href="http://localhost:4000/categories/#blog">blog</a></li>
            
              
                <li><a href="http://localhost:4000/categories/#firebase">firebase</a></li>
            
              
                <li><a href="http://localhost:4000/categories/#flag">flag</a></li>
            
              
                <li><a href="http://localhost:4000/categories/#interview">interview</a></li>
            
              
                <li><a href="http://localhost:4000/categories/#kotlin">kotlin</a></li>
            
              
                <li><a href="http://localhost:4000/categories/#mac">mac</a></li>
            
              
                <li><a href="http://localhost:4000/categories/#notification">notification</a></li>
            
              
                <li><a href="http://localhost:4000/categories/#sample">sample</a></li>
            
              
                <li><a href="http://localhost:4000/categories/#singleTask">singleTask</a></li>
            
              
                <li><a href="http://localhost:4000/categories/#알고리즘">알고리즘</a></li>
            
              
                <li><a href="http://localhost:4000/categories/#자바">자바</a></li>
            
          </ul>
        </li>
      
    
  </ul>
</nav>




<div id="main" role="main">
  
<article class="hentry">
  <header>
    
    <div class="entry-meta">
      <span class="entry-date date published updated"><time datetime="2020-01-28T00:00:00+09:00"><a href="http://localhost:4000/android/android-collections/">January 28, 2020</a></time></span><span class="author vcard"><span class="fn"><a href="http://localhost:4000/about/" title="About kimyounghoon">kimyounghoon</a></span></span>
      
      <span class="entry-reading-time">
        <i class="fa fa-clock-o"></i>
        
        Reading time ~1 minute
      </span><!-- /.entry-reading-time -->
      
    </div><!-- /.entry-meta -->
    
      <h1 class="entry-title"><a href="http://localhost:4000/android/android-collections/" rel="bookmark" title="코틀린 람다 콜렉션(kotlin lambda collection)" itemprop="url">코틀린 람다 콜렉션(kotlin lambda collection)</a></h1>
    
  </header>
  <div class="entry-content">
      <h3 id="todo--선택된-아이템-알파벳들을-콤마로-구분해서-string-으로-만들기">TODO : 선택된 아이템 알파벳들을 콤마로 구분해서 String 으로 만들기</h3>

<p>사용 된 함수는 filterIsInstance , filter , map , joinToString<br />
선언형 프로그래밍 -&gt; 함수형 프로그래밍 방식으로 변경 하는 과정을 코딩</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>/**
 * Created by kimyounghoon on 2020-01-29.
 */
class KotlinLambdaCollectionTest {
    open class BaseItem(var id: String)

    class Item(id: String, val alphabet: String, val isSelected: Boolean) : BaseItem(id)

    lateinit var items: ArrayList&lt;BaseItem&gt;

    @Before
    fun before() {  //테스트 시작 되기 전에 불린다. 리스트 셋팅!!
        items =
            arrayListOf(
                Item("1", "a", false),
                Item("2", "b", true),
                Item("3", "c", true),
                Item("4", "d", true),
                Item("5", "e", false),
                Item("6", "f", false),
                Item("7", "g", false)
            )
    }


   /*
    *  test1 은 명령형 프로그래밍 2,3,4 함수형 프로그래밍으로 변환하는 작업입니다.
    * */
    @Test
    fun test1() {
        var alphabets = ""                  
        val filterItems = arrayListOf&lt;Item&gt;()
        for (item in items) {
            if (item is Item &amp;&amp; item.isSelected) {
                filterItems.add(item)
            }
        }

        for (index in 0 until filterItems.size) {
            if (index == filterItems.size - 1) {
                alphabets += filterItems[index].alphabet
            } else {
                alphabets += filterItems[index].alphabet + ","
            }
        }

        Assert.assertEquals("b,c,d", alphabets)
    }

    /*
    *  filter 를 사용해서 Item 으로만 걸렀기 때문에 as List&lt;Item&gt; 으로 캐스팅. 뭔가 아쉽다.
    * */
    @Test
    fun test2() {
        var alphabets = ""
        (items.filter {
            (it is Item &amp;&amp; it.isSelected)
        } as List&lt;Item&gt;).let {
            for (index in 0 until it.size) {
                if (index == it.size - 1) {
                    alphabets += it[index].alphabet
                } else {
                    alphabets += it[index].alphabet + ","
                }
            }
        }

        Assert.assertEquals("b,c,d", alphabets)
    }

    /*
    * filter 와 map , joinToString 을 사용하니 함수형 프로그래밍으로 바뀌고
    * 가독성도 많이 좋아졌는데 map 에서 한번더 캐스팅 해서 써야하는게 불편해서 구글링 한번더!!
    * */
    @Test
    fun test3() {
        val alphabets = items.filter {
            (it is Item &amp;&amp; it.isSelected)
        }.map {
            (it as Item).alphabet
        }.joinToString(",")

        Assert.assertEquals("b,c,d", alphabets)
    }

    /*
    * filterIsInstance 를 사용하면 Item 만 필터 되어서 Item 형태로 반환 되기때문에 캐스팅이 필요 없다.
    * */
    @Test
    fun test4() {
        val alphabets = items.filterIsInstance&lt;Item&gt;().filter {
            it.isSelected
        }.map {
            it.alphabet
        }.joinToString(",")

        Assert.assertEquals("b,c,d", alphabets)
    }
}
</code></pre></div></div>

<p>test1 과 test4 를 비교 했을때 코드 양도 많이 줄고 훨씬 가독성이 많이 올라간걸 볼 수 있다.</p>

      
  </div><!-- /.entry-content -->
</article><!-- /.hentry -->

<article class="hentry">
  <header>
    
    <div class="entry-meta">
      <span class="entry-date date published updated"><time datetime="2020-01-16T00:00:00+09:00"><a href="http://localhost:4000/android/android-bluetooth-android10/">January 16, 2020</a></time></span><span class="author vcard"><span class="fn"><a href="http://localhost:4000/about/" title="About kimyounghoon">kimyounghoon</a></span></span>
      
      <span class="entry-reading-time">
        <i class="fa fa-clock-o"></i>
        
        Reading time ~1 minute
      </span><!-- /.entry-reading-time -->
      
    </div><!-- /.entry-meta -->
    
      <h1 class="entry-title"><a href="http://localhost:4000/android/android-bluetooth-android10/" rel="bookmark" title="안드로이드 10(29) 블루투스 연결 대응" itemprop="url">안드로이드 10(29) 블루투스 연결 대응</a></h1>
    
  </header>
  <div class="entry-content">
      <h1 id="문제점">문제점</h1>
<h2 id="bluetoothadapterstartdiscovery-return-false-">bluetoothAdapter.startDiscovery() return false !!!</h2>

<p>true로 반환 되어야 하는데 false 로 반환 되어 블루투스 검색을 할 수 없음</p>

<p>안드로이드 10 버전에서 위치 관련 보안이 강화 되었는데 블루투스 검색 할때 위치 관련 퍼미션이 필요하기 때문에 일어난 퍼미션 관련 이슈였습니다.</p>

<p>버전 별로 블루투스 검색 및 연결 관련 퍼미션을 알아보겠습니다.</p>

<p>기본적으로 블루투스 기능 ON , 위치 기능 ON 상태 여야 합니다.</p>

<p>블루투스 기능 OFF 상태일 때는 사용 가능 하게 팝업 띄어 주고 위치 기능 OFF 상태일때는 체크 해서 설정 화면으로 보내면됩니다.</p>

<h2 id="targetsdkversion-29-미만인-경우">targetSdkVersion 29 미만인 경우</h2>

<p>AndroidManifest.xml 파일</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>&lt;uses-permission android:name="android.permission.BLUETOOTH" /&gt;
&lt;uses-permission android:name="android.permission.BLUETOOTH_ADMIN" /&gt;
&lt;uses-permission android:name="android.permission.ACCESS_COARSE_LOCATION"/&gt;
&lt;uses-permission android:name="android.permission.ACCESS_FINE_LOCATION" /&gt;
</code></pre></div></div>

<p>29 미만인 경우 위치 관련 퍼미션이 적용 되어 있을 경우 아래 퍼미션이 자동으로 추가 됩니다.</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>&lt;uses-permission android:name="android.permission.ACCESS_BACKGROUND_LOCATION"/&gt;
</code></pre></div></div>

<p>아래 퍼미션은 런타임 퍼미션 적용<br />
Manifest.permission.ACCESS_COARSE_LOCATION</p>

<h2 id="targetsdkversion-29-인-경우">targetSdkVersion 29 인 경우</h2>

<p>AndroidManifest.xml 파일 </p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>&lt;uses-permission android:name="android.permission.BLUETOOTH" /&gt;
&lt;uses-permission android:name="android.permission.BLUETOOTH_ADMIN" /&gt;
&lt;uses-permission android:name="android.permission.ACCESS_COARSE_LOCATION"/&gt;
&lt;uses-permission android:name="android.permission.ACCESS_FINE_LOCATION" /&gt;
&lt;uses-permission android:name="android.permission.ACCESS_BACKGROUND_LOCATION"/&gt;
</code></pre></div></div>

<p>아래 퍼미션은 런타임 퍼미션 적용</p>
<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>Manifest.permission.ACCESS_COARSE_LOCATION,
Manifest.permission.ACCESS_FINE_LOCATION,
Manifest.permission.ACCESS_BACKGROUND_LOCATION
</code></pre></div></div>
<p>퍼미션 승인 후 bluetoothAdapter. startDiscovery() 이 true로 반환되는걸 확인 할 수 있었습니다.</p>

<p>아래 이미지는 블루투스 연결 버튼 클릭 시 플로우 차트</p>
<figure>
	<img src="/images/2020-01-17-bluetooth-flow-chart.png" alt="" />
</figure>

      
  </div><!-- /.entry-content -->
</article><!-- /.hentry -->

<article class="hentry">
  <header>
    
    <div class="entry-meta">
      <span class="entry-date date published updated"><time datetime="2020-01-10T00:00:00+09:00"><a href="http://localhost:4000/android/android-centerLoadingProgress/">January 10, 2020</a></time></span><span class="author vcard"><span class="fn"><a href="http://localhost:4000/about/" title="About kimyounghoon">kimyounghoon</a></span></span>
      
      <span class="entry-reading-time">
        <i class="fa fa-clock-o"></i>
        
        Reading time ~1 minute
      </span><!-- /.entry-reading-time -->
      
    </div><!-- /.entry-meta -->
    
      <h1 class="entry-title"><a href="http://localhost:4000/android/android-centerLoadingProgress/" rel="bookmark" title="Center Loading Progress" itemprop="url">Center Loading Progress</a></h1>
    
  </header>
  <div class="entry-content">
      <p>API 호출 할 때 다른 터치를 막기 위해 센터 프로그레스를 보여주는 경우 여러 가지 방법이 있지만 그중 progressDialog 를 사용해보자~!</p>

<p>BaseActivity 에서 progressDialog 를 가지고 있고 필요할 때 showProgress() , hideProgress() 를 통해 보여주거나 감출수 있다.</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>abstract class BaseActivity : AppCompatActivity(){
    private var progressDialog: AppCompatDialog? = null

    fun showProgress() {
        if (this == null || isFinishing) {
            return
        }

        progressDialog?.apply {
            dismiss()
        }

        progressDialog = AppCompatDialog(this)
        progressDialog?.apply {
            setCancelable(false)
            window?.setBackgroundDrawable(ColorDrawable(Color.TRANSPARENT))
            setContentView(R.layout.progress_center_loading)
            show()
        }
    }

    fun hideProgress() {
        progressDialog?.dismiss()
    }
}
</code></pre></div></div>

<p>아래는 layout 코드</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="cp">&lt;?xml version="1.0" encoding="utf-8"?&gt;</span>
<span class="nt">&lt;androidx.constraintlayout.widget.ConstraintLayout</span> <span class="na">xmlns:android=</span><span class="s">"http://schemas.android.com/apk/res/android"</span>
    <span class="na">xmlns:app=</span><span class="s">"http://schemas.android.com/apk/res-auto"</span>
    <span class="na">android:layout_width=</span><span class="s">"match_parent"</span>
    <span class="na">android:layout_height=</span><span class="s">"match_parent"</span>
    <span class="na">android:clickable=</span><span class="s">"true"</span><span class="nt">&gt;</span>

    <span class="nt">&lt;ProgressBar</span>
        <span class="na">style=</span><span class="s">"?android:attr/indeterminateDrawable"</span>
        <span class="na">android:layout_width=</span><span class="s">"34dp"</span>
        <span class="na">android:layout_height=</span><span class="s">"34dp"</span>
        <span class="na">android:indeterminate=</span><span class="s">"true"</span>
        <span class="na">app:layout_constraintBottom_toBottomOf=</span><span class="s">"parent"</span>
        <span class="na">app:layout_constraintEnd_toEndOf=</span><span class="s">"parent"</span>
        <span class="na">app:layout_constraintStart_toStartOf=</span><span class="s">"parent"</span>
        <span class="na">app:layout_constraintTop_toTopOf=</span><span class="s">"parent"</span> <span class="nt">/&gt;</span>
<span class="nt">&lt;/androidx.constraintlayout.widget.ConstraintLayout&gt;</span>
</code></pre></div></div>

<p>이 경우 장점은 
BaseActivity 를 상속 받는 Activity 의 경우 showProgress , hideProgress 를 통해 간편하게 사용할 수 있다.</p>

<p>그리고 액티비티 layout에서 위의 layout 코드를 포함 하고 있지 않아도 된다.</p>

<p>단점은 필요 하지 않은 Activity 에서도 progressDialog 변수를 가지고 있을 수 있다.</p>

<p>다른 방법으로는 Application class 에서 가지고 있거나 싱글톤 클래스로 가지고 있어도 괜찮을것 같다.</p>

      
  </div><!-- /.entry-content -->
</article><!-- /.hentry -->

<article class="hentry">
  <header>
    
    <div class="entry-meta">
      <span class="entry-date date published updated"><time datetime="2019-12-26T00:00:00+09:00"><a href="http://localhost:4000/android/android-bindingadapter/">December 26, 2019</a></time></span><span class="author vcard"><span class="fn"><a href="http://localhost:4000/about/" title="About kimyounghoon">kimyounghoon</a></span></span>
      
      <span class="entry-reading-time">
        <i class="fa fa-clock-o"></i>
        
        Reading time ~1 minute
      </span><!-- /.entry-reading-time -->
      
    </div><!-- /.entry-meta -->
    
      <h1 class="entry-title"><a href="http://localhost:4000/android/android-bindingadapter/" rel="bookmark" title="DataBidning , BindingAdapter" itemprop="url">DataBidning , BindingAdapter</a></h1>
    
  </header>
  <div class="entry-content">
      <p>데이터 바인딩라이브러리는 레이아웃의 UI 구성 요소를 프로그래밍 방식이 아닌 선언적 형식을 사용하여 앱의 데이터 소스에 바인딩 할 수있는 지원 라이브러리다.</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="cp">&lt;?xml version="1.0" encoding="utf-8"?&gt;</span>
<span class="nt">&lt;layout</span> <span class="na">xmlns:android=</span><span class="s">"http://schemas.android.com/apk/res/android"</span>
    <span class="na">xmlns:app=</span><span class="s">"http://schemas.android.com/apk/res-auto"</span>
    <span class="na">xmlns:bind=</span><span class="s">"http://schemas.android.com/tools"</span>
    <span class="na">xmlns:tools=</span><span class="s">"http://schemas.android.com/tools"</span><span class="nt">&gt;</span>
    <span class="nt">&lt;data&gt;</span>
        <span class="nt">&lt;import</span> <span class="na">type=</span><span class="s">"android.view.View"</span> <span class="nt">/&gt;</span>
        <span class="nt">&lt;variable</span>
            <span class="na">name=</span><span class="s">"viewModel"</span>
            <span class="na">type=</span><span class="s">"패키지경로.ExampleViewModel"</span> <span class="nt">/&gt;</span>
    <span class="nt">&lt;/data&gt;</span>
    <span class="nt">&lt;androidx.constraintlayout.widget.ConstraintLayout</span>
            <span class="na">android:layout_width=</span><span class="s">"match_parent"</span>
            <span class="na">android:layout_height=</span><span class="s">"match_parent"</span>
            <span class="na">android:background=</span><span class="s">"@{viewModel.isRedBackground ? @color/red : @color/white}"</span><span class="nt">&gt;</span>
    <span class="nt">&lt;/androidx.constraintlayout.widget.ConstraintLayout&gt;</span>
<span class="nt">&lt;/layout&gt;</span>

</code></pre></div></div>

<p>예를 들어 API 호출을 하고 받아온 값이 빨간색 배경색을 가져야 한다면 viewModel.isRedBackground (ObservableField Boolean 값) 데이터 변경 만으로 뷰가 빨간색 또는 흰색으로 변경 된다. 하지만 상태값이 빨간색 흰색 그외 초록색이 필요하다면 BindingAdapter를 통해서 구현할 수 있다.</p>

<p>android:background=”@{viewModel.isRedBackground ? @color/red : @color/white}”<br />
–&gt; bind:status=”@{viewModel.status}”</p>

<p>위의 코드에서 해당 줄만 변경한다. 그 다음 BindingAdapter를 만들어준다.</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>@BindingAdapter("bind:status")
fun bindBuyingStatusText(imageView: ImageView, status: String?) {
    when (status) {
        "빨간색" -&gt; {
            imageView.setBackgroundColor(imageView.context.getColor(R.color.color_red))
        }
        "흰색" -&gt; {
            imageView.setBackgroundColor(imageView.context.getColor(R.color.color_white))
        }
        else -&gt; {  //초록색
            imageView.setBackgroundColor(imageView.context.getColor(R.color.color_green))
        }
    }
}

</code></pre></div></div>

<p>상태값이 2가지만 있는경우에도 BindingAdapter 사용해서 처리할수 있지만 굳이 사용할 필요는 없을것 같다.</p>

      
  </div><!-- /.entry-content -->
</article><!-- /.hentry -->

<article class="hentry">
  <header>
    
    <div class="entry-meta">
      <span class="entry-date date published updated"><time datetime="2019-12-12T00:00:00+09:00"><a href="http://localhost:4000/android/android-rxkotlin_combineLatest/">December 12, 2019</a></time></span><span class="author vcard"><span class="fn"><a href="http://localhost:4000/about/" title="About kimyounghoon">kimyounghoon</a></span></span>
      
      <span class="entry-reading-time">
        <i class="fa fa-clock-o"></i>
        
        Reading time ~1 minute
      </span><!-- /.entry-reading-time -->
      
    </div><!-- /.entry-meta -->
    
      <h1 class="entry-title"><a href="http://localhost:4000/android/android-rxkotlin_combineLatest/" rel="bookmark" title="RxKotlin combineLatest" itemprop="url">RxKotlin combineLatest</a></h1>
    
  </header>
  <div class="entry-content">
      <p>집에 와서 안드로이드 단톡방 쭉쭉 보다가 어떤 분이 질문 올린 글을 봤다.<br />
Rx 공부 해야지 해야지 생각 하다가 안하고 있었는데 마침 문제가 하나 생김 ㅎㅎ</p>

<p>문제는 RxKotlin 을 사용해서 입력창 세가지가 있는데 각각 입력창에서 입력 할 때마다 validation 체크를 하고 다 통과 되면 버튼을 활성화 시키고 싶다.</p>

<p>키워드는 combineLatest 이다. 아래의 TestCode 를 보자.</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>class CombineLatestTest {
    @Test
    fun test() {
        var isValid = false
        val emailSubject = BehaviorSubject.create&lt;String&gt;()
        val passwordSubject = BehaviorSubject.create&lt;String&gt;()
        val nickNameSubject = BehaviorSubject.create&lt;String&gt;()
        BehaviorSubject.combineLatest&lt;String, String, String, Boolean&gt;(
            emailSubject,
            passwordSubject,
            nickNameSubject,
            Function3&lt;String, String, String, Boolean&gt; { email, password, nickname -&gt;
                return@Function3 email.isNotEmpty() &amp;&amp; password.isNotEmpty() &amp;&amp; nickname.isNotEmpty()
            }
        ).subscribe { result -&gt;
            isValid = result
             println("활성화 여부 $isValid")
        }

        emailSubject.onNext("이메일 입력")
        assertEquals(isValid, false)

        passwordSubject.onNext("패스워드 입력")
        assertEquals(isValid, false)

        nickNameSubject.onNext("닉네임 입력")
        assertEquals(isValid, true)

        passwordSubject.onNext("")  //패스워드 제거
        assertEquals(isValid, false)

        passwordSubject.onNext("패스워드 입력")  //패스워드 다시 입력
        assertEquals(isValid, true)

    }

}


    결과는 
    활성화 여부 false
    활성화 여부 false
    활성화 여부 true
    활성화 여부 false
    활성화 여부 true


</code></pre></div></div>

<p>combineLatest 은 파라미터로 ObservableSource 를 받고 마지막에 리턴할 Function 을 받는다.<br />
ObservableSource 갯수 제한은 9개 까지로 확인했다.<br />
테스트 코드라서 isNotEmpty 로 처리 해뒀는데 저기 부분이 isValid 로 변경 되면 되겠다~</p>

      
  </div><!-- /.entry-content -->
</article><!-- /.hentry -->



<div class="pagination">
  <ul class="inline-list">
    
    

    
    
      <li><strong class="current-page">1</strong></li>
    

    
    

    
    
    

    
      
        
        
        
        <li><a href="http://localhost:4000/page2/">2</a></li>
      
    
      
        
        
        
        <li><a href="http://localhost:4000/page3/">3</a></li>
      
    

    
    
      <li>…</li>
    

    
      <li><a href="http://localhost:4000/page11/">11</a></li>
    

    
    
      <li><a href="http://localhost:4000/page2/" class="btn">Next</a></li>
    
  </ul>
</div>


</div><!-- /#main -->

<script type="text/javascript" src="//ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>
<script type="text/javascript">window.jQuery || document.write('<script type="text/javascript" src="http://localhost:4000/assets/js/vendor/jquery-1.9.1.min.js"><\/script>')</script>
<script type="text/javascript" src="http://localhost:4000/assets/js/scripts.min.js"></script>
<script type="text/javascript" async defer id="github-bjs" src="https://buttons.github.io/buttons.js"></script>
<script type="text/javascript">!function(d,s,id){var js,fjs=d.getElementsByTagName(s)[0],p=/^http:/.test(d.location)?'http':'https';if(!d.getElementById(id)){js=d.createElement(s);js.id=id;js.src=p+'://platform.twitter.com/widgets.js';fjs.parentNode.insertBefore(js,fjs);}}(document, 'script', 'twitter-wjs');</script>



<!-- Asynchronous Google Analytics snippet -->
<script type="text/javascript">
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
    (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
    m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-154716591-1', 'auto');
  ga('require', 'linkid', 'linkid.js');
  ga('send', 'pageview');
</script>





<script type="text/javascript">
    sharing();
</script>


<!-- Global site tag (gtag.js) - Google Analytics -->
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-154716591-1"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'UA-154716591-1');
</script>


<div class="footer-wrapper">
  <footer role="contentinfo">
    <span>&copy; 2020 kimyounghoon. Powered by <a href="http://jekyllrb.com" rel="nofollow">Jekyll</a> using the <a href="http://github.com/aron-bordin/neo-hpstr-jekyll-theme" rel="nofollow">Neo-HPSTR Theme</a>.</span>

  </footer>
</div><!-- /.footer-wrapper -->

</body>
</html>
